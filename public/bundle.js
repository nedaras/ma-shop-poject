"use strict";(()=>{var b=Object.defineProperty;var S=(e,t)=>()=>(e&&(t=e(e=0)),t);var L=(e,t)=>{for(var r in t)b(e,r,{get:t[r],enumerable:!0})};var x,R,f,I,m,T,i,d,c,M,N,F,A,u,h,v,C,E=S(()=>{x="https://js.stripe.com/v3",R=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,f="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",I=function(){for(var t=document.querySelectorAll('script[src^="'.concat(x,'"]')),r=0;r<t.length;r++){var o=t[r];if(R.test(o.src))return o}return null},m=function(t){var r=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",o=document.createElement("script");o.src="".concat(x).concat(r);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(o),o},T=function(t,r){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"4.1.0",startTime:r})},i=null,d=null,c=null,M=function(t){return function(){t(new Error("Failed to load Stripe.js"))}},N=function(t,r){return function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))}},F=function(t){return i!==null?i:(i=new Promise(function(r,o){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&t&&console.warn(f),window.Stripe){r(window.Stripe);return}try{var n=I();if(n&&t)console.warn(f);else if(!n)n=m(t);else if(n&&c!==null&&d!==null){var a;n.removeEventListener("load",c),n.removeEventListener("error",d),(a=n.parentNode)===null||a===void 0||a.removeChild(n),n=m(t)}c=N(r,o),d=M(o),n.addEventListener("load",c),n.addEventListener("error",d)}catch(g){o(g);return}}),i.catch(function(r){return i=null,Promise.reject(r)}))},A=function(t,r,o){if(t===null)return null;var n=t.apply(void 0,r);return T(n,o),n},h=!1,v=function(){return u||(u=F(null).catch(function(t){return u=null,Promise.reject(t)}),u)};Promise.resolve().then(function(){return v()}).catch(function(e){h||console.warn(e)});C=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];h=!0;var n=Date.now();return v().then(function(a){return A(a,r,n)})}});var w={};L(w,{loadStripe:()=>C});var y=S(()=>{E()});document.body.addEventListener("htmx:beforeSwap",e=>{if(e.detail.pathInfo.requestPath==="/htmx/search"){switch(e.detail.xhr.status){case 404:case 500:break;default:return}e.detail.isError=!1,e.detail.shouldSwap=!0}});document.body.addEventListener("htmx:afterSwap",e=>{if(e.detail.pathInfo.requestPath!=="/htmx/search")return;let t=document.getElementById("search"),r=t==null?void 0:t.nextElementSibling;if(!t||!r)return;function o(){r.remove(),t.removeEventListener("input",o)}t.addEventListener("input",o)});document.body.addEventListener("htmx:beforeSwap",e=>{if(e.detail.pathInfo.requestPath.startsWith("/htmx/product")){switch(e.detail.xhr.status){case 404:break;default:return}e.detail.isError=!1,e.detail.shouldSwap=!0}});document.body.addEventListener("htmx:beforeSwap",e=>{if(e.detail.isError||!e.detail.pathInfo.requestPath.startsWith("/htmx/product")||e.detail.serverResponse!=="")return;let t=document.getElementById("placeholder");t&&(p(t),e.detail.shouldSwap=!1)});document.body.addEventListener("htmx:beforeSwap",e=>{if(e.detail.isError||e.detail.pathInfo.requestPath!=="/bag")return;let t=document.getElementById("placeholder");if(!t)return;let r=t.querySelector("div");r&&(t.style.transitionDuration="0ms",t.style.transform="",r.innerHTML="")});document.body.addEventListener("htmx:afterSwap",e=>{if(e.detail.failed||!e.detail.pathInfo.requestPath.startsWith("/htmx/add_to_bag"))return;let t=document.getElementById("placeholder");if(!t)return;let r=t.getElementsByTagName("img");if(r.length==0)return;let o=0;for(let n of r)n.onload=()=>{if(r.length!=++o)return;let a=document.getElementById("placeholder-close");t.style.transitionDuration="",t.style.transform="translateY(0%)",t.onclick=P(setTimeout(()=>p(t),2e3)),a&&(a.onclick=()=>p(t))}});function P(e){return()=>{clearTimeout(e)}}function p(e){e.style.transform="",setTimeout(()=>{let t=e.querySelector("div");t&&(t.innerHTML="")},200)}document.body.addEventListener("htmx:beforeSwap",e=>{if(e.detail.isError&&!(!e.detail.pathInfo.requestPath.startsWith("/address/")&&!e.detail.pathInfo.requestPath.startsWith("/htmx/address/"))){switch(e.detail.xhr.status){case 404:case 429:case 500:break;default:return}e.detail.isError=!1,e.detail.shouldSwap=!0}});document.body.addEventListener("htmx:beforeSwap",e=>{e.detail.isError||e.detail.pathInfo.requestPath==="/htmx/checkout"&&(U(e.detail.serverResponse),e.detail.shouldSwap=!1)});async function U(e){let t=(await Promise.resolve().then(()=>(y(),w))).loadStripe,r=await t("pk_test_51Plzla09srk6l0GXkHcOPFrRM2z2zUMhs8VraClycfkq9oUBeCzLKehc6RfTAbaIQQ6fPKDLAAeNBNeFBizV0vlt00cDaxIkDF"),o=await(r==null?void 0:r.initEmbeddedCheckout({clientSecret:e}));o==null||o.mount("#stripe")}})();
//# sourceMappingURL=bundle.js.map
