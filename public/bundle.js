"use strict";(()=>{var o=class extends HTMLElement{constructor(){super();let e=()=>localStorage.getItem("default_address")==null||this.isDefaultAddress();this.innerHTML="<input id='address-checkbox' type=\"checkbox\"".concat(e()?" checked":"","/>"),document.body.removeEventListener("htmx:beforeSwap",d),document.body.addEventListener("htmx:beforeSwap",d)}isDefaultAddress(){let e=localStorage.getItem("default_address");return e==null?!1:e===this.getAttribute("address")}isChecked(){return this.querySelector("input").checked}};function d(t){if(t.detail.xhr.status!=200)return;let e=t.detail.elt.querySelector("address-checkbox"),r=e==null?void 0:e.getAttribute("address");if(e&&r){if(e.isChecked()){localStorage.setItem("default_address",r);return}e.isDefaultAddress()&&localStorage.removeItem("default_address")}}document.body.addEventListener("htmx:beforeSwap",t=>{if(t.detail.pathInfo.requestPath==="/htmx/search"){switch(t.detail.xhr.status){case 404:case 500:break;default:return}t.detail.isError=!1,t.detail.shouldSwap=!0}});document.body.addEventListener("htmx:afterSwap",t=>{if(t.detail.pathInfo.requestPath!=="/htmx/search")return;let e=document.getElementById("search"),r=e==null?void 0:e.nextElementSibling;if(!e||!r)return;function n(){r.remove(),e.removeEventListener("input",n)}e.addEventListener("input",n)});document.body.addEventListener("htmx:beforeSwap",t=>{if(t.detail.pathInfo.requestPath.startsWith("/htmx/product")){switch(t.detail.xhr.status){case 404:break;default:return}t.detail.isError=!1,t.detail.shouldSwap=!0}});document.body.addEventListener("htmx:beforeSwap",t=>{if(t.detail.isError||!t.detail.pathInfo.requestPath.startsWith("/htmx/product")||t.detail.serverResponse!=="")return;let e=document.getElementById("placeholder");e&&(u(e),t.detail.shouldSwap=!1)});document.addEventListener("click",t=>{let e=t.target;if((e==null?void 0:e.id)!=="placeholder-close")return;let r=document.getElementById("placeholder");r&&u(r)});document.body.addEventListener("htmx:beforeSwap",t=>{if(t.detail.isError||t.detail.pathInfo.requestPath!=="/bag")return;let e=document.getElementById("placeholder");if(!e)return;let r=e.querySelector("div");r&&(e.style.transitionDuration="0ms",e.style.transform="",r.innerHTML="")});document.body.addEventListener("htmx:afterSwap",t=>{if(t.detail.failed||!t.detail.pathInfo.requestPath.startsWith("/htmx/add_to_bag"))return;let e=document.getElementById("placeholder");if(!e)return;let r=e.getElementsByTagName("img");if(r.length==0)return;let n=0;for(let i of r)i.onload=()=>{r.length==++n&&(e.style.transitionDuration="",e.style.transform="translateY(0%)",e.onclick=l(setTimeout(()=>u(e),2e3)))}});function l(t){return()=>{clearTimeout(t)}}function u(t){t.style.transform="",setTimeout(()=>{let e=t.querySelector("div");e&&(e.innerHTML="")},200)}document.body.addEventListener("htmx:beforeSwap",t=>{if(t.detail.isError&&!(!t.detail.pathInfo.requestPath.startsWith("/address/")&&!t.detail.pathInfo.requestPath.startsWith("/htmx/address/"))){switch(t.detail.xhr.status){case 404:case 429:case 500:break;default:return}t.detail.isError=!1,t.detail.shouldSwap=!0}});window.getProducts=()=>{let t=document.getElementById("products")||void 0;if(!t)return;let e=[];if(t.querySelectorAll("section").forEach(r=>{e.push({tid:r.getAttribute("aria-tid")||"",mid:r.getAttribute("aria-mid")||"",amount:r.getAttribute("aria-amount")||"",size:r.getAttribute("aria-size")||""})}),e.length!=0)return JSON.stringify(e)};document.body.addEventListener("htmx:afterSwap",t=>{t.detail.failed||t.detail.pathInfo.requestPath!="/htmx/checkout"||!document.getElementById("placeholder")||console.log("we will do some crazy stuff.")});customElements.define("address-checkbox",o);})();
//# sourceMappingURL=bundle.js.map
