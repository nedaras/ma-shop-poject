"use strict";(()=>{var n=class extends HTMLElement{constructor(){super();let t=()=>localStorage.getItem("default_address")==null||this.isDefaultAddress();this.innerHTML="<input id='address-checkbox' type=\"checkbox\"".concat(t()?" checked":"","/>"),document.body.removeEventListener("htmx:beforeSwap",i),document.body.addEventListener("htmx:beforeSwap",i)}isDefaultAddress(){let t=localStorage.getItem("default_address");return t==null?!1:t===this.getAttribute("address")}isChecked(){return this.querySelector("input").checked}},a=class extends HTMLElement{constructor(){super();let t=()=>{let r=localStorage.getItem("default_address");return r?r===this.getAttribute("address"):!1};this.innerHTML='<label class="block">\n      <input\n        type="radio" \n        id="address-'.concat(this.getAttribute("address"),'"\n        class="peer appearance-none absolute outline-none"\n        name="address"\n        value="').concat(this.getAttribute("address"),'"\n        ').concat(t()?"checked":"","\n      >\n        ").concat(this.innerHTML,"\n    </label>")}};function i(e){if(e.detail.xhr.status!=200)return;let t=e.detail.elt.querySelector("address-checkbox"),r=t==null?void 0:t.getAttribute("address");if(t&&r){if(t.isChecked()){localStorage.setItem("default_address",r);return}t.isDefaultAddress()&&localStorage.removeItem("default_address")}}document.body.addEventListener("htmx:beforeSwap",e=>{if(e.detail.pathInfo.requestPath==="/htmx/search"){switch(e.detail.xhr.status){case 404:case 500:break;default:return}e.detail.isError=!1,e.detail.shouldSwap=!0}});document.body.addEventListener("htmx:afterSwap",e=>{if(e.detail.pathInfo.requestPath!=="/htmx/search")return;let t=document.getElementById("search"),r=t==null?void 0:t.nextElementSibling;if(!t||!r)return;function o(){r.remove(),t.removeEventListener("input",o)}t.addEventListener("input",o)});document.body.addEventListener("htmx:beforeSwap",e=>{if(e.detail.pathInfo.requestPath.startsWith("/htmx/product")){switch(e.detail.xhr.status){case 404:break;default:return}e.detail.isError=!1,e.detail.shouldSwap=!0}});document.body.addEventListener("htmx:beforeSwap",e=>{if(e.detail.isError||!e.detail.pathInfo.requestPath.startsWith("/htmx/product")||e.detail.serverResponse!=="")return;let t=document.getElementById("placeholder");t&&(d(t),e.detail.shouldSwap=!1)});document.addEventListener("click",e=>{let t=e.target;if((t==null?void 0:t.id)!=="placeholder-close")return;let r=document.getElementById("placeholder");r&&d(r)});document.body.addEventListener("htmx:beforeSwap",e=>{if(e.detail.isError||e.detail.pathInfo.requestPath!=="/bag")return;let t=document.getElementById("placeholder");if(!t)return;let r=t.querySelector("div");r&&(t.style.transitionDuration="0ms",t.style.transform="",r.innerHTML="")});document.body.addEventListener("htmx:afterSwap",e=>{if(e.detail.failed||!e.detail.pathInfo.requestPath.startsWith("/htmx/add_to_bag"))return;let t=document.getElementById("placeholder");if(!t)return;let r=t.getElementsByTagName("img");if(r.length==0)return;let o=0;for(let c of r)c.onload=()=>{r.length==++o&&(t.style.transitionDuration="",t.style.transform="translateY(0%)",t.onclick=p(setTimeout(()=>d(t),2e3)))}});function p(e){return()=>{clearTimeout(e)}}function d(e){e.style.transform="",setTimeout(()=>{let t=e.querySelector("div");t&&(t.innerHTML="")},200)}document.body.addEventListener("htmx:beforeSwap",e=>{if(e.detail.isError&&!(!e.detail.pathInfo.requestPath.startsWith("/address/")&&!e.detail.pathInfo.requestPath.startsWith("/htmx/address/"))){switch(e.detail.xhr.status){case 404:case 429:case 500:break;default:return}e.detail.isError=!1,e.detail.shouldSwap=!0}});window.getProducts=()=>{let e=document.getElementById("products")||void 0;if(!e)return;let t=[];if(e.querySelectorAll("section").forEach(r=>{t.push({tid:r.getAttribute("aria-tid")||"",mid:r.getAttribute("aria-mid")||"",amount:r.getAttribute("aria-amount")||"",size:r.getAttribute("aria-size")||""})}),t.length!=0)return JSON.stringify(t)};htmx.config.selfRequestsOnly=!1;customElements.define("address-checkbox",n);customElements.define("address-radio",a);})();
//# sourceMappingURL=bundle.js.map
