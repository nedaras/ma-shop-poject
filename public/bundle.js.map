{
  "version": 3,
  "sources": ["../src/scripts/components.ts", "../src/scripts/index.ts", "../src/scripts/bag.ts", "../src/scripts/sneaker.ts", "../src/scripts/address.ts", "../src/scripts/checkout.ts", "../src/scripts/main.ts"],
  "sourcesContent": ["import { StatusOK } from \"./http\"\n\nexport class AddressCheckbox extends HTMLElement {\n\n  constructor() {\n    super()\n\n    const checked = () => {\n      return localStorage.getItem(\"default_address\") == null || this.isDefaultAddress()\n    }\n\n    this.innerHTML = `<input id='address-checkbox' type=\\\"checkbox\\\"${checked() ? \" checked\" : \"\"}/>`\n\n    document.body.removeEventListener('htmx:beforeSwap', afterOnLoad)\n    document.body.addEventListener('htmx:beforeSwap', afterOnLoad)\n  }\n  \n  isDefaultAddress() {\n    const defaultAddress = localStorage.getItem('default_address')\n    if (defaultAddress == null) return false\n\n    return defaultAddress === this.getAttribute('address')\n  }\n\n  isChecked() {\n    return (this.querySelector('input') as HTMLInputElement).checked\n  }\n\n}\n\nexport class AddressRadio extends HTMLElement {\n\n  constructor() {\n    super()\n\n    const checked = () => {\n      const defaultAddress = localStorage.getItem('default_address')\n      return defaultAddress ? defaultAddress === this.getAttribute('address') : false\n    }\n\n    this.innerHTML = `<label class=\"block\">\n      <input\n        type=\"radio\" \n        id=\"address-${this.getAttribute(\"address\")}\"\n        class=\"peer appearance-none absolute outline-none\"\n        name=\"address\"\n        value=\"${this.getAttribute(\"address\")}\"\n        ${checked() ? \"checked\" : \"\"}\n      >\n        ${this.innerHTML}\n    </label>`\n  }\n}\n\nfunction afterOnLoad(e: CustomEvent<HTMXBeforeSwap>) {\n  if (e.detail.xhr.status != StatusOK) return\n\n  const checkbox = e.detail.elt.querySelector('address-checkbox') as AddressCheckbox | null\n  const address = checkbox?.getAttribute(\"address\")\n\n  if (checkbox && address) {\n    if (checkbox.isChecked()) {\n       localStorage.setItem(\"default_address\", address)\n       return\n    }\n    checkbox.isDefaultAddress() && localStorage.removeItem(\"default_address\")\n  }\n}\n", "import { StatusInternalServerError, StatusNotFound } from \"./http\"\n\ndocument.body.addEventListener('htmx:beforeSwap', (e) => {\n  if (e.detail.pathInfo.requestPath !== '/htmx/search') return\n  switch (e.detail.xhr.status) {\n  case StatusNotFound:\n  case StatusInternalServerError:\n    break\n  default:\n    return\n  }\n  e.detail.isError = false\n  e.detail.shouldSwap = true\n})\n\ndocument.body.addEventListener('htmx:afterSwap', (e) => {\n  if (e.detail.pathInfo.requestPath !== '/htmx/search') return\n\n  const search = document.getElementById('search') as HTMLInputElement\n  const label = search?.nextElementSibling as HTMLLabelElement\n\n  if (!search) return\n  if (!label) return\n\n  function listener() {\n    label.remove()\n    search.removeEventListener('input', listener)\n  }\n\n  search.addEventListener('input', listener)\n})\n", "import { StatusNotFound } from \"./http\"\n\ndocument.body.addEventListener('htmx:beforeSwap', (e) => {\n  if (!e.detail.pathInfo.requestPath.startsWith('/htmx/product')) return\n  switch (e.detail.xhr.status) {\n  case StatusNotFound:\n    break\n  default:\n    return\n  }\n  e.detail.isError = false\n  e.detail.shouldSwap = true\n})\n", "document.body.addEventListener('htmx:beforeSwap', (e) => {\n  if (e.detail.isError) return\n  if (!e.detail.pathInfo.requestPath.startsWith('/htmx/product')) return\n  if (e.detail.serverResponse !== \"\") return\n\n  const placeholder = document.getElementById('placeholder')\n  if (!placeholder) return\n\n  clear(placeholder)\n  e.detail.shouldSwap = false\n})\n\ndocument.addEventListener('click', (e) => {\n  const close = e.target as HTMLElement | null\n  if (close?.id !== \"placeholder-close\") return\n\n  const placeholder = document.getElementById('placeholder')\n  placeholder && clear(placeholder)\n  \n})\n\ndocument.body.addEventListener('htmx:beforeSwap', (e) => {\n  if (e.detail.isError) return\n  if (e.detail.pathInfo.requestPath !== '/bag') return\n\n  const placeholder = document.getElementById('placeholder')\n  if (!placeholder) return\n\n  const div = placeholder.querySelector('div')\n  if (!div) return\n\n  placeholder.style.transitionDuration = '0ms'\n  placeholder.style.transform = ''\n\n  div.innerHTML = ''\n})\n\ndocument.body.addEventListener('htmx:afterSwap', (e) => {\n  if (e.detail.failed) return\n  if (!e.detail.pathInfo.requestPath.startsWith('/htmx/add_to_bag')) return\n\n  const placeholder = document.getElementById('placeholder')\n  if (!placeholder) return\n\n  const images = placeholder.getElementsByTagName('img')\n  if (images.length == 0) return\n\n  let i = 0\n  for (const image of images) {\n    image.onload = () => {\n      if (images.length != ++i) return\n\n      placeholder.style.transitionDuration = ''\n      placeholder.style.transform = 'translateY(0%)'\n      placeholder.onclick = clickHandler(\n        setTimeout(() => clear(placeholder), 2000)\n      )\n\n    }\n  }\n})\n\nfunction clickHandler(timeout: number) {\n  return () => {\n    clearTimeout(timeout)\n  }\n}\n// todo: we would need whole day to sit make that scroll fell right\n\nfunction clear(placeholder: HTMLElement) {\n  placeholder.style.transform = ''\n  setTimeout(() => {\n    const div = placeholder.querySelector('div')\n    div && (div.innerHTML = '')\n  }, 200)\n}\n", "import { StatusInternalServerError, StatusNotFound, StatusTooManyRequests } from \"./http\"\n\ndocument.body.addEventListener('htmx:beforeSwap', (e) => {\n  if (!e.detail.isError) return\n  if (!e.detail.pathInfo.requestPath.startsWith(\"/address/\") && !e.detail.pathInfo.requestPath.startsWith(\"/htmx/address/\")) return\n\n  switch (e.detail.xhr.status) {\n  case StatusNotFound:\n  case StatusTooManyRequests:\n  case StatusInternalServerError:\n    break\n  default:\n    return\n  }\n\n  e.detail.isError = false\n  e.detail.shouldSwap = true\n})\n", "type Product = {\n  tid: string,\n  mid: string,\n  amount: string\n  size: string\n}\n\n// @ts-ignore\nwindow.getProducts = () => {\n  const element = document.getElementById('products') as HTMLUListElement || undefined\n  if (!element) return undefined\n\n  const products: Product[] = []\n  element.querySelectorAll('section').forEach(section => {\n    products.push({\n      tid: section.getAttribute(\"aria-tid\") || \"\",\n      mid: section.getAttribute(\"aria-mid\") || \"\",\n      amount: section.getAttribute(\"aria-amount\") || \"\",\n      size: section.getAttribute(\"aria-size\") || \"\",\n    })\n  })\n\n  if (products.length == 0) {\n    return undefined\n  }\n\n  return JSON.stringify(products) \n}\n", "import { AddressCheckbox, AddressRadio } from './components'\n\nimport './index'\nimport './bag'\nimport './sneaker'\nimport './address'\nimport './checkout'\n\n// @ts-ignore\nhtmx.config.selfRequestsOnly = false \n\ncustomElements.define(\"address-checkbox\", AddressCheckbox)\ncustomElements.define(\"address-radio\", AddressRadio)\n"],
  "mappings": "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",
  "names": ["AddressCheckbox", "checked", "afterOnLoad", "defaultAddress", "AddressRadio", "checkbox", "address", "search", "label", "listener", "placeholder", "clear", "close", "div", "images", "i", "image", "clickHandler", "timeout", "element", "products", "section", "AddressCheckbox", "AddressRadio"]
}
